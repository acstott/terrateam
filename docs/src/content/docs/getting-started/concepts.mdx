---
title: Concepts
description: Learn about Terrateam concepts
tableOfContents:
  minHeadingLevel: 1
  maxHeadingLevel: 3
---

## Key Concepts and Terminology
To effectively use Terrateam, it's important to understand its key concepts and terminology. In the following section, we'll explore the core components of Terrateam and how they work together to simplify your infrastructure management workflow.

## Dirspace

In Terrateam, a Dirspace is a fundamental concept that defines the scope of Terraform operations. It uniquely combines a `repository`, a `directory` within that repository, and a Terraform `workspace`, represented as a tuple `(repository, directory, workspace)`. When the repository context is clear, it can be simplified to `(directory, workspace)`.

Dirspaces are automatically created when Terrateam detects Terraform configurations in your repository. Each directory containing Terraform files creates a Dirspace with either its explicitly configured workspace or the **default workspace** (created automatically when no specific workspace is defined).

#### **Example:**

Imagine you have a repository called `infra-repo` managing multiple environments:

| Repository | Directory | Workspace |
| ---------- | --------- | --------- |
| infra-repo | dev       | default   |
| infra-repo | staging   | default   |
| infra-repo | prod      | default   |

A **workspace** enables you to manage multiple states for the same directory, isolating environments like `dev`, `staging`, and `prod` within the same repository.

```
Repository: infra-repo
  |
  |-- dev/
  |    |-- Workspace: default
  |
  |-- staging/
  |    |-- Workspace: default
  |
  |-- prod/
       |-- Workspace: default
```
:::note
Terrateam executes operations like plan and apply within the context of a Dirspace.
:::
## Changes and File Patterns

When a pull request is opened or updated, Terrateam detects changes based on patterns defined in your `.terrateam/config.yml` file under the [`when_modified`](/configuration-reference/when-modified) configuration. The default configuration looks like:

```yaml
when_modified:
  file_patterns:
    - '**/*.tf'
    - '**/*.tfvars'
```

This configuration instructs Terrateam to monitor changes to any files with `.tf` or `.tfvars` extensions. Adjust these patterns in your configuration file to align with your project's structure.

Terrateam maps detected changes to their appropriate [Dirspaces](/getting-started/concepts#dirspace). These mapped Dirspaces are referred to as Changes. When executing operations, Terrateam only considers Dirspaces with modified files in the pull request.

## Auto-Plan and Auto-Apply

Terrateam provides automated Terraform execution workflows to simplify infrastructure changes:

- **Auto-Plan**: Runs `terraform plan` automatically when a pull request is created or updated. Enable with:
  ```yaml
  auto_plan: true  # Set to false to disable
  ```
- **Auto-Apply**: Runs `terraform apply` post-merge. It is disabled by default. Enable with:
  ```yaml
  auto_apply: true
  ```
These automated operations streamline workflows while maintaining control through configurable thresholds.

## Tags and Tag Sets

Terrateam uses Tags to organize Terraform resources through flexible labeling:

* **Tag Set**: Unordered, unique labels assigned to resources  
  Example: `env:prod, component:network`
* **Tag Query**: Filter to match specific Tag Sets  
  Example: `env:prod` matches all production resources

**Example workflow:**
1. Tag EC2 instances with `resource-type:compute`
2. Create Auto-Scaling Groups with `resource-type:compute, environment:production`
3. Query with `resource-type:compute` to manage all compute resources

Tags enable precise resource management across complex infrastructures.
## Locks and Unlocks

Terrateam's locking system prevents concurrent modifications by ensuring only one change can be applied to a resource at a time. This prevents:

- State file conflicts  
- Resource modification races  
- Concurrent apply operations  

**Key behaviors**:
- Enabled by default (no config needed)
- Automatically released after apply + merge
- Force unlock via comment: `terrateam unlock`

```yaml
# .terrateam/config.yml (default shown)
workflows:
  lock_policy: strict  # strict|apply|merge|none
```

For advanced configurations see our [Locks & Concurrency guide](/advanced-workflows/locks-and-concurrency).

:::note
 Default settings work for most teams. Customize only if you need specific lock timing or policies.
:::
