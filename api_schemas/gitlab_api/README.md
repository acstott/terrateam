This directory contains the API and Webhook JSON schemas for GitLab.

## api.json

This file is generated by a combination of the `extract_paths.py` and manual modification.  As far as I can tell, the OpenAPI Schema provided by GitLab is not a valid OpenAPI schema.  Maybe it's just the tooling we have, I don't know.

In order to extract the specific pieces of the API we care about, we used Claude to implement `extract_paths.py` which lets us extract specific paths + all schema dependencies.

We then take that and manually modify it to get it working.

When updating `api.json`, I recommend the following workflow:

1. use `yj` to convert `openapi_v2.yaml` to `openapi_v2.json`.
2. Run `extract_paths.py` on the existing version of the GitLab OpenAPI schema and output to `api.parent.json`.
3. Run `extract_paths.py` on the new version of the GitLab OpenAPI and output to `api.new.json`.
4. Perform a 3-way merge between `api.json`, `api.new.json`, and `api.parent.json`

The existing file was generated using the following command:

```
python extract_paths.py openapi_v2.json --prefixes '/api/v3/' '/api/v4/projects/' '/api/v4/users' '/api/v4/version' '/api/v4/user' '/api/v4/runners' '/api/v4/groups' '/api/v4/applications' '/api/v4/admin' | jq -S . > api.json
```
